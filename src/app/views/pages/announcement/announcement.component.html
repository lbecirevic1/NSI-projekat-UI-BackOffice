<c-card>
  <div class="me-1" style="padding: 1%">
    <button cButton color="primary" (click)="toggleCreateAnnouncementButton()">+ Add new notification</button>
  </div>
</c-card>
<c-card class="mb-4">
  <c-card-body>
    <ng-container *ngTemplateOutlet="liveDemo"></ng-container>
    <ng-container *ngTemplateOutlet="deleteDemo"></ng-container>
    <ng-container *ngTemplateOutlet="createDemo"></ng-container>

    <table cTable hover>
      <tbody>
      <ng-container *ngFor="let value of notifications">

          <tr>Title: {{value.Title}}</tr>
          <tr>Url: {{value.SourceUrl}}</tr>
          <tr>Description: {{value.Description}}</tr>
          <tr>Content: {{value.Content}}</tr>
          <tr>Publish Date: {{value.PublishDate}}</tr>
          <c-button-group aria-label="Basic example" role="group">
            <button cButton color="light" (click)="toggleEditButtonDemo(value)">Edit</button>
            <button cButton color="danger" (click)="toggleDeleteButton(value.Id)">Delete</button>
          </c-button-group>
      </ng-container>
      </tbody>
    </table>
  </c-card-body>
</c-card>

<ng-template #liveDemo>
  <c-modal id="liveDemoModal" [visible]="liveDemoVisible" (visibleChange)="handleLiveDemoChange($event)">
    <c-modal-header>
      <h5 cModalTitle>Delete notification</h5>
      <button (click)="closeDeleteButton()" cButtonClose></button>
    </c-modal-header>
    <c-modal-body>Are you sure you want to delete this record?</c-modal-body>
    <c-modal-footer>
      <button (click)="closeDeleteButton()" cButton color="secondary">
        Close
      </button>
      <button cButton color="primary" (click)="deleteItem()">Delete</button>
    </c-modal-footer>
  </c-modal>
</ng-template>

<c-modal id="liveEditForm" [visible]="editFormVisible" (visibleChange)="handleEditModalChange($event)">
  <c-modal-header>
    Edit form
  </c-modal-header>
  <c-modal-body>
    <form cForm *ngIf=editFormVisible>
      <div class="mb-3">
        <label cLabel for="announcementTitleInput1">Title</label>
        <textarea cFormControl id="announcementTitleInput1" rows="1">{{editAnnouncement.Title}}</textarea>
      </div>
      <div class="mb-3">
        <label cLabel for="announcementTitleInput2">Url</label>
        <textarea cFormControl id="announcementTitleInput2" rows="1">{{editAnnouncement.SourceUrl}}</textarea>
      </div>
      <div class="mb-3">
        <label cLabel for="announcementTitleInput3">Description</label>
        <textarea cFormControl id="announcementTitleInput3" rows="1">{{editAnnouncement.Description}}</textarea>
      </div>
      <div class="mb-3">
        <label cLabel for="announcementTitleInput4">Content</label>
        <textarea cFormControl id="announcementTitleInput4" rows="1">{{editAnnouncement.Content}}</textarea>
      </div>
      <div class="mb-3">
        <label cLabel for="announcementTitleInput5">Additional Information</label>
        <textarea cFormControl id="announcementTitleInput5" rows="1">{{editAnnouncement.AdditionalInformation}}</textarea>
      </div>
    </form>
  </c-modal-body>
  <c-modal-footer>
    <button (click)="toggleEditDemo()" cButton color="secondary">
      Close
    </button>
    <button cButton color="primary" >Save changes</button>
  </c-modal-footer>
</c-modal>

<!-- Form for creating new announcement -->
<ng-template #createDemo>
<c-modal id="createForm" [visible]="createFormVisible" (visibleChange)="handleCreateAnnouncement($event)" >
  <c-modal-header>
    Create new announcement
  </c-modal-header>
  <c-modal-body>
      <form #createForm="ngForm" *ngIf=createFormVisible>
        <div class="mb-3">
          <div class="input-fields">
            <label cLabel for="title">Provider Id</label>
            <input cFormControl id="providerId" rows="1" name="newAnnouncProviderId" type="text" ngModel>
          </div>
        </div>
      <div class="mb-3">
        <div class="input-fields">
        <label cLabel for="title">Title</label>
        <input cFormControl id="title" rows="1" name="newAnnouncTitle" type="text" ngModel>
      </div>
      <div class="row">
        <div class="col-md">
          <div class="mb-3 form-outline datetimepicker">
            <label cLabel for="startdatepicker">Start date</label>
            <input cFormControl type="text" value="22/12/2022"  id="startdatepicker"  name="newAnnouncStartDate" ngModel/>
          </div>
        </div>
        <div class="col-md">
          <div class="mb-3 form-outline datetimepicker">
            <label cLabel for="startdatepicker">Start time</label>
            <input cFormControl type="text" value="14:56:03"  id="starttimepicker"  name="newAnnouncStartTime" ngModel/>
          </div>
        </div>
        <div class="col-md">
          <div class="mb-3 form-outline datetimepicker">
            <label cLabel for="enddatepicker">End date</label>
            <input cFormControl type="text" value="22/12/2022" id="enddatepicker" name="newAnnouncEndDate" ngModel/>
          </div>
        </div>
        <div class="col-md">
          <div class="mb-3 form-outline datetimepicker">
            <label cLabel for="enddatepicker">End time</label>
            <input cFormControl type="text" value="14:56:30" id="endtimepicker" name="newAnnouncEndTime" ngModel/>
          </div>
        </div>
      </div>
      <div class="mb-3">
        <label cLabel for="url">Url</label>
        <textarea cFormControl id="url" rows="1" name="newAnnouncUrl" ngModel></textarea>
      </div>
      <div class="mb-3">
        <label cLabel for="description">Description</label>
        <textarea cFormControl id="description" rows="2" name="newAnnouncDescription" ngModel></textarea>
      </div>
      <div class="mb-3">
        <label cLabel for="content">Content</label>
        <textarea cFormControl id="content" rows="1" name="newAnnouncContent" ngModel></textarea>
      </div>
      <div class="mb-3">
        <label cLabel for="additionalInformation">Additional Information</label>
        <textarea cFormControl id="additionalInformation" rows="1"name="newAnnouncAddInfo" ngModel ></textarea>
      </div>
      <div class="col">
        <c-dropdown>
          <button cButton cDropdownToggle color="secondary">
            Regions
          </button>
          <ul cDropdownMenu>
            <ng-container *ngFor="let value of regions">
              <li (click)="regionClicked(value.Id)"><h6>{{value.Name}}</h6></li>
            </ng-container>
          </ul>
        </c-dropdown>
        <div class="col-md">
          <c-dropdown>
            <button cButton cDropdownToggle color="secondary">
              Streets
            </button>
            <ul cDropdownMenu>
              <ng-container *ngFor="let value of streets">
                <li (click)="streetClicked(value.Id)">{{value.Name}}</li>
              </ng-container>
            </ul>
          </c-dropdown>
        </div>
      </div>
      </div>
    </form>
  </c-modal-body>
  <c-modal-footer>
    <button (click)="toggleCreateAnnouncementButton()" cButton color="secondary">
      Close
    </button>
    <button cButton color="primary" type='submit' (click)="submitForm(createForm.value)">Save changes</button>
  </c-modal-footer>
</c-modal>
</ng-template>
<ng-template #deleteDemo>
  <c-modal id="liveDemoModalAlert" [visible]="doubleAnnouncementVisible" (visibleChange)="handleDoubleAnnouncement($event)">
    <c-modal-header>
      <h5 cModalTitle>Double notification alert</h5>
      <button (click)="doubleAnnouncement()" cButtonClose></button>
    </c-modal-header>
    <c-modal-body>There is the same notification in database.</c-modal-body>
    <c-modal-footer>
      <button (click)="doubleAnnouncement()" cButton color="secondary">
        Close
      </button>
    </c-modal-footer>
  </c-modal>
</ng-template>
